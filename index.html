<!DOCTYPE html>
<html lang="he">
<head>
  <meta charset="UTF-8">
  <title>חדשות טכנולוגיה בישראל</title>
  <style>
    html, body {
      margin: 0;
      padding: 0;
      height: 100%;
    }
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background-color: #f9f9f9;
      direction: rtl;
      display: flex;
      flex-direction: column;
    }
    main {
      flex: 1;
      max-width: 1000px;
      margin: auto;
      padding: 20px;
    }
    header, footer {
      text-align: center;
      padding: 20px;
      background-color: #007acc;
      color: white;
    }
    .article {
      background-color: white;
      border-radius: 8px;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
      margin-bottom: 20px;
      overflow: hidden;
      display: flex;
      flex-direction: row;
    }
    .article img {
      width: 200px;
      object-fit: cover;
    }
    .article-content {
      padding: 15px;
      flex: 1;
    }
    .article-content h2 {
      margin: 0 0 10px 0;
      font-size: 1.2em;
    }
    .article-content p {
      margin: 0 0 10px 0;
      color: #555;
    }
    .article-content .meta {
      font-size: 0.9em;
      color: gray;
    }
    @media (max-width: 600px) {
      .article {
        flex-direction: column;
      }
      .article img {
        width: 100%;
        height: auto;
      }
    }
  </style>
</head>
<body>
  <header>
    <h1>📰 חדשות טכנולוגיה בישראל</h1>
  </header>

  <main>
    <div id="news">טוען חדשות...</div>
  </main>

  <footer>
    <p>Made by David Kamenetsky</p>
  </footer>

  <script>
    async function fetchRSS(url, sourceName) {
      const api = "https://api.rss2json.com/v1/api.json?rss_url=" + encodeURIComponent(url);
      try {
        const res = await fetch(api);
        const data = await res.json();
        return data.items.map(item => ({
          title: item.title,
          link: item.link,
          pubDate: new Date(item.pubDate).toLocaleString('he-IL'),
          source: sourceName,
          description: item.description || '',
          thumbnail: item.thumbnail || ''
        }));
      } catch (error) {
        console.error(`Error fetching ${sourceName}:`, error);
        return [];
      }
    }

    async function loadNews() {
      const feeds = [
        { url: "https://www.ynet.co.il/Integration/StoryRss3082.xml", name: "Ynet טכנולוגיה" },
        { url: "https://www.calcalist.co.il/home/0,7340,L-3695,00.xml", name: "כלכליסט טק" },
        { url: "https://www.themarker.com/cmlink/1.442", name: "דה מרקר הייטק" },
        { url: "https://www.geektime.co.il/feed/", name: "גיקטיים" },
        { url: "https://www.gadgety.co.il/feed/", name: "גאדג'טי" },
        { url: "https://rss.walla.co.il/feed/6?type=main", name: "וואלה טכנולוגיה" }
      ];

      let allNews = [];
      for (let feed of feeds) {
        const items = await fetchRSS(feed.url, feed.name);
        allNews.push(...items);
      }

      allNews.sort((a, b) => new Date(b.pubDate) - new Date(a.pubDate));
      const container = document.getElementById("news");
      container.innerHTML = "";
      allNews.forEach(item => {
        const image = item.thumbnail ? `<img src="${item.thumbnail}" alt="תמונה">` : '';
        const description = item.description ? `<p>${item.description}</p>` : '';
        container.innerHTML += `
          <div class="article">
            ${image}
            <div class="article-content">
              <h2><a href="${item.link}" target="_blank">${item.title}</a></h2>
              ${description}
              <div class="meta">${item.source} - ${item.pubDate}</div>
            </div>
          </div>
        `;
      });
    }

    loadNews();
  </script>
</body>
</html>
